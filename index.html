<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
  <head>
	<style type="text/css">
		.header { background-color: #65f; padding: 50px; color: white; }
	</style>
	<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
	<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
	<META HTTP-EQUIV="Expires" CONTENT="0">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>飘论坛</title>
    <script language="javascript" src="inc/jq_1_11_1.js" type="text/javascript"></script>
    <script language="javascript" src="inc/underscore.js" type="text/javascript"></script>
  </head>
 <body>
	<script language="javascript">
var PeerForum = function()
{
	var pf = this;

	this.Init = function()
	{
		this.ChkEnv();
		this.GetNode();
		this.GetUser();
	};

	this.ChkEnv = function()
	{
		this.Post( { cmd: 'ChkEnv' }, function( rslt )
		{
			alert( rslt.message );
		} );
	};

	this.GetNode = function()
	{
		this.Post( { cmd: 'GetNode' }, function( rslt )
		{
			alert( rslt.message );
		} );
	};

	this.GetUser = function()
	{
		this.Post( { cmd: 'GetUser' }, function( rslt )
		{
			alert( rslt.message );
		} );
	};

	this.Post = function( params, dataFunc, errFunc )
	{
		$.post( '/', Params, function( data )
		{
			var Result = JSON.parse( data );
			if( 'error' in Result )
			{
				( errFunc || alert )( Result.error );
			}
			dataFunc( Result );
		} );
	}

	this.Init();
};

$( function()
{
	new PeerForum();
} );
	</script>
		<div class="header">PeerForum</div>
  </body>
</html>
